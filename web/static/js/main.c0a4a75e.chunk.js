(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){e.exports={headerWrp:"styles_headerWrp__1_Dm5",logoutBtn:"styles_logoutBtn__1QQL7",menuBtn:"styles_menuBtn__1KRFV"}},141:function(e,t,n){e.exports={imageWrapper:"styles_imageWrapper__2dMls",image:"styles_image__3p04J",editForm:"styles_editForm__3jWNU"}},142:function(e,t,n){e.exports={threadContent:"styles_threadContent__3ZqFB",addPostForm:"styles_addPostForm__3rRRi",toolbar:"styles_toolbar__2OeiH"}},192:function(e,t,n){e.exports={imageWrapper:"styles_imageWrapper__3x6bS",image:"styles_image__3OXF5"}},195:function(e,t,n){e.exports={toolbarBtn:"styles_toolbarBtn__sddlM",arhivCard:"styles_arhivCard__2MMZX"}},196:function(e,t,n){e.exports={arhivCard:"styles_arhivCard__1AVrU",threadContent:"styles_threadContent__2ksFz",addPostForm:"styles_addPostForm__XR4Sf",toolbar:"styles_toolbar__3N-7t"}},303:function(e,t,n){e.exports={comentsForm:"styles_comentsForm__B81Eb"}},313:function(e,t,n){e.exports={logoWrapper:"styles_logoWrapper__31qDY"}},329:function(e,t,n){e.exports=n(627)},350:function(e,t,n){},44:function(e,t,n){e.exports={toolbarBtn:"styles_toolbarBtn__3XrwV",postCard:"styles_postCard__10UsJ",imageWrapper:"styles_imageWrapper__5R3Ff",postImage:"styles_postImage__2vqyw"}},50:function(e,t,n){e.exports={imageWrapper:"styles_imageWrapper__3imhy",image:"styles_image__1kFBu",modalForm:"styles_modalForm__6aFZP",modalLabel:"styles_modalLabel__2ive0",modalCard:"styles_modalCard__2_b6n",modalInput:"styles_modalInput__C73TA",modalDrop:"styles_modalDrop__3baso",modalClear:"styles_modalClear__20c_t"}},56:function(e,t,n){e.exports={comment:"styles_comment__19pSl"}},57:function(e,t,n){e.exports={infoForm:"styles_infoForm__1KQQC",infoTopCard:"styles_infoTopCard__3As9E",infoCard:"styles_infoCard__1gzBk",infoLabel:"styles_infoLabel__r594H",infoEvent:"styles_infoEvent__x1Pex"}},604:function(e,t){},624:function(e,t,n){},626:function(e,t,n){},627:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(42),c=n.n(o),s=n(21),u=n(139),i=n(24),l=n(23),m=n(12),p=n(4),d=n.n(p),A=n(8),f=n(11),b=n(289);function h(e){return"https://mini-chat-server-00.herokuapp.com"+e.endpoint+(e.query?"?".concat(b.stringify(e.query)):"")}function v(e){var t={};e.attachment||(t["Content-Type"]="application/json",t.Accept="application/json");var n,a=localStorage.getItem("token");if(a&&!e.skipAuthorization&&(t.Authorization="Bearer ".concat(a)),e.attachment){if("GET"===e.type)throw new Error("GET request does not support attachments.");var r=new FormData;r.append("image",e.attachment),n=r}else if(e.request){if("GET"===e.type)throw new Error("GET request does not support request body.");n=JSON.stringify(e.request)}return Object(f.a)({method:e.type,headers:t,signal:e.ct},"GET"===e.request?{}:{body:n})}function E(e){return g.apply(this,arguments)}function g(){return(g=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}return n="Something went wrong with request!",e.prev=2,e.next=5,t.json();case 5:n=e.sent,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:throw n;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function O(e){return y.apply(this,arguments)}function y(){return(y=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h(t),v(t));case 2:return n=e.sent,e.next=5,E(n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/images/attachment",type:"POST",attachment:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/images/",type:"POST",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/images/".concat(t),type:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/images/deletetmpt",type:"DELETE",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=n(640),C=n(643),_=n(648),I=n(43),S=n.n(I),N=n(37),T=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts",type:"GET",query:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/postlist",type:"GET",query:{postId:t}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts",type:"POST",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts",type:"PUT",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/".concat(t),type:"GET"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/".concat(t),type:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/arhiv",type:"GET",query:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/restore",type:"PUT",request:{postId:t}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/react",type:"PUT",request:{postId:t,isLike:!0}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/react",type:"PUT",request:{postId:t,isLike:!1}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R='<!DOCTYPE HTML> <html lang="ru"> <head> <meta charset="utf-8"/> <title> Message from Chat </title> </head> <body>',U='<tr> <td width="100"> </td> <td bgcolor="d2d1c6" style="font-size: 16px; padding: 5px">',G=function(e,t,n){return"".concat(R," <h3> ").concat('This letter was sent to you because a password change request was received on the server.<br /> If you did not send such a request, just ignore this letter.<br /><br />To change your password insert new password in the field below and click button "Send"'," </h3> <br /> ").concat(function(e,t,n){return'<form method="post" action="'.concat(e,'/pass/user/reset" style="width: 450px; margin-left: 50px;')+' padding: 15px; font-size: 18px; background-color: #94dcc0; border: 1px #002aff solid"> Input your new password :<br> <input type="password" name ="pass" style="background-color: #e7e7f6"> <input type="text"'+' name ="mail" value="'.concat(t,'" style="display: none"> <input type="text" name ="hash" value="').concat(n,'" ')+'style="display: none"> <input type="submit" value="S e n d" style="width: 120px; background-color: chartreuse; margin-left: 10px"> </form>'}(e,t,n))},Y=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem("mstate_".concat(e),n)}catch(a){}},V=function(e){var t=new Date(e).toLocaleDateString(),n=new Date(e).toLocaleTimeString();return"".concat(t," at ").concat(n)},K=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/posts/mail",type:"POST",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/pass/mail/mail",type:"POST",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t){var n="".concat(R,"<h2> User ").concat(t.username,' tags your post with "Like" ').concat(V(Date()))+'<br /><br /><a href="'.concat(window.location.origin,"/share/").concat(e.id,'">')+"You would see it via link</a></h2>".concat("</body> </html>"),a={email:e.user.email,mailThema:"Your post liked",htmlText:n};K(a)},X=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/".concat(t),type:"GET"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/commentlist",type:"GET",query:{commentId:t}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/",type:"POST",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/",type:"PUT",request:t});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/".concat(t),type:"DELETE"});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/react",type:"PUT",request:{commentId:t,isLike:!0}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/api/comments/react",type:"PUT",request:{commentId:t,isLike:!1}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re="POST_ACTION:ADD_POST",oe="POST_ACTION:SET_ALL_POSTS",ce=function(e){return{type:oe,posts:e}},se=function(e){return{type:"POST_ACTION:LOAD_MORE_POSTS",posts:e}},ue=function(e){return{type:re,post:e}},ie=function(e){return{type:"LOAD_ARHIV_POSTS",posts:e}},le=function(e){return{type:"POST_ACTION:SET_EXPANDED_POST",post:e}},me=function(e){return{type:"POST_ACTION_EDIT_EDIT",editpost:e}},pe=function(e){return{type:"SHOW_INFO_POST_PANEL",infolist:e}},de=function(e){return{type:"SHOW_INFO_COMMENT_PANEL",infolist:e}},Ae=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e);case 2:return r=t.sent,o=r[1].id,t.next=6,H(o);case 6:c=t.sent,s=function(){return Object(f.a)({},c)},u=a(),i=u.posts,l=i.posts,m=i.expandedPost,p=l.map((function(e){return e.id!==o?e:s()})),n(ce(p)),m&&m.id===o&&n(le(s()));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},fe=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,H(e);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=void 0;case 7:a=t.t0,n(le(a));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,H(e);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=void 0;case 7:a=t.t0,n(me(a));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,B(e.id);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=void 0;case 7:a=t.t0,n(pe(e?{obj:e,taglist:a}:void 0));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,Z(e.id);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=void 0;case 7:a=t.t0,n(de(e?{obj:e,taglist:a}:void 0));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ee=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p,A,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(e);case 2:r=t.sent,o=r.id,c=r.dopp,s=o?1:-1,u=a(),i=u.posts,l=i.posts,m=i.expandedPost,p=u.profile,A=function(e){return Q(e,p.user),Object(f.a)(Object(f.a)({},e),{},{likeCount:Number(e.likeCount)+s,dislikeCount:Number(e.dislikeCount)-c})},b=l.map((function(t){return t.id!==e?t:A(t)})),n(ce(b)),m&&m.id===e&&n(le(A(m)));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p,A;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:r=t.sent,o=r.id,c=r.dopp,s=o?1:-1,u=function(e){return Object(f.a)(Object(f.a)({},e),{},{dislikeCount:Number(e.dislikeCount)+s,likeCount:Number(e.likeCount)-c})},i=a(),l=i.posts,m=l.posts,p=l.expandedPost,A=m.map((function(t){return t.id!==e?t:u(t)})),n(ce(A)),p&&p.id===e&&n(le(u(p)));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Oe=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var xe,je=n(99),we=n(71),ke=n(645),Pe=n(318),Ce=String.fromCharCode(10),_e=function(e){var t=[];return e.split(Ce).forEach((function(e,n,a){t.push(e),n<a.length-1&&t.push(r.a.createElement("br",null))})),t},Ie=function(){try{return sessionStorage.getItem("mailAddress")}catch(e){return""}},Se=function(e){try{sessionStorage.setItem("mailAddress",e)}catch(t){}},Ne=n(290),Te=n(291),Be=n(97),Me=n(317),De=n(316),He=(n(350),"Ok");function Le(e){var t=e.isShowing,n=e.hide,a=e.caps,o=e.mode;if(!0===t){var s,u=[];return o?(u.push(r.a.createElement("button",{id:"keyModal",type:"button",className:"modal-button",onClick:n},He)),u.push(r.a.createElement("button",{id:"keyModal",type:"button",className:"modal-button",onClick:n},"Cancel")),s="data:image/x-icon;base64,AAABAAEAICAEAAAAAADoAgAAFgAAACgAAAAgAAAAQAAAAAEABAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACAAAAAgIAAgAAAAIAAgACAgAAAgICAAMDAwAAAAP8AAP8AAAD//wD/AAAA/wD/AP//AAD///8AAAAAAAAAAAAAB3AAAAAAAAAAAAAAAAAAAHdwAAAAAAAAAAAAAAAAAAAHcAAAAAAAAAAAAAAAAAAPB3AAAAAAAAAAAAAAAAAA/wdwAAAAAAAAAAAAAAAHD/8HcAAAAAAAAAAAAAB3dw//B3d3AAAAAAAAAAB3cACP/wd3d3cAAAAAAAAHAAj///+AAHd3cAAAAAAAAI////////gAd3cAAAAAAI//////////+Ad3cAAAAA/////////////wd3cAAAD/////+MyP/////wd3cAB///////zMz//////wd3AHj//////8zM//////+Ad3B///////+MyP//////8Hd3j/////////////////gHd/////////zP////////B3f////////8yP///////wd3/////////Mz///////8Hd/////////jMz///////B3f/////+MyPzMz//////wcHj/////zMz4zMz/////gHAH/////8zM/8zM/////wcAB4/////M///MzP////gAAAB/////jI/8zMj////wAAAAB/////jMzMyP////AAAAAAB/////////////8AAAAAAAB4//////////+HAAAAAAAAB3j///////+HcAAAAAAAAAAHd4////h3cAAAAAAAAAAAAAB3d3d3AAAAAAAAD//+f////H////h////wf///4H///4B///wAD//wAAP/4AAB/8AAAP+AAAB/AAAAPgAAABwAAAAYAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAYAAAAOAAAAHwAAAD+AAAB/wAAA/+AAAf/wAAP//AAP//+Af/w=="):(u.push(r.a.createElement("button",{id:"keyModal",type:"button",className:"modal-button",onClick:n,onKeyUp:n},He)),s="data:image/x-icon;base64,AAABAAEAICAEAAAAAADoAgAAFgAAACgAAAAgAAAAQAAAAAEABAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACAAAAAgIAAgAAAAIAAgACAgAAAgICAAMDAwAAAAP8AAP8AAAD//wD/AAAA/wD/AP//AAD///8AAAAHd3d3d3d3d3d3d3d3AAAAd3d3d3d3d3d3d3d3d3AAMAAAAAAAAAAAAAAAB3d3A7u7u7u7u7u7u7u7u4B3dzu7u7u7u7u7u7u7u7u4B3c7u7u7u7u7u7u7u7u7uwd3O7u7u7u7uACLu7u7u7sHcDu7u7u7u7AAC7u7u7u4B3ADu7u7u7uwAAu7u7u7sHcAA7u7u7u7uACLu7u7u4B3AAA7u7u7u7u7u7u7u7sHcAAAO7u7u7u7C7u7u7u4B3AAAAO7u7u7uAi7u7u7sHcAAAADu7u7u7MDu7u7u4B3AAAAADu7u7uwALu7u7sHcAAAAAA7u7u7gACLu7u4B3AAAAAAA7u7uzAAO7u7sHcAAAAAAAO7u7sAAAu7u4B3AAAAAAAAO7u7AAALu7sHcAAAAAAAADu7uwAAC7u4B3AAAAAAAAADu7sAAAu7sHcAAAAAAAAAA7u7AAALu4B3AAAAAAAAAAA7u4AAi7sHcAAAAAAAAAAAO7u7u7u4B3AAAAAAAAAAAAO7u7u7sHcAAAAAAAAAAAADu7u7u4B3AAAAAAAAAAAAADu7u7sHcAAAAAAAAAAAAAA7u7u4B3AAAAAAAAAAAAAAA7u7sHcAAAAAAAAAAAAAAAO7u4BwAAAAAAAAAAAAAAAAO7gAAAAAAAAAAAAAAAAAAAMzAAAAAAAAAAD4AAAD8AAAAcAAAACAAAAAAAAAAAAAAAAAAAABAAAAAYAAAAOAAAADwAAAB8AAAAfgAAAP4AAAD/AAAB/wAAAf+AAAP/gAAD/8AAB//AAAf/4AAP/+AAD//wAB//8AAf//gAP//4AD///AB///wAf//+AP///gH///8H////j//w=="),c.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal-overlay"}),r.a.createElement("div",{className:"modal-wrapper","aria-modal":!0,"aria-hidden":!0,tabIndex:-1,role:"dialog"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("img",{src:s,type:"image/x-icon",alt:"Icon",className:"modal-img"}),r.a.createElement("div",{className:"modal-label"},a)),r.a.createElement("div",{className:"modal-footer"},u)))),document.body)}return null}var ze=function(e){Object(Me.a)(n,e);var t=Object(De.a)(n);function n(e){var a;return Object(Ne.a)(this,n),(a=t.call(this,e)).caption="",a.doHide=a.doHide.bind(Object(Be.a)(a)),a.doShow=a.doShow.bind(Object(Be.a)(a)),xe=a.doShow,a}return Object(Te.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyPress,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress,!0)}},{key:"handleKeyPress",value:function(e){e.stopImmediatePropagation(),this.logick=!0}},{key:"doShow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.caption=e,this.mode=t,this.callback=n;var a=this.props.setVisiAction;a(!0)}},{key:"doHide",value:function(e){this.caption="",(0,this.props.setVisiAction)(!1),this.callback&&this.callback(e.currentTarget.innerText)}},{key:"render",value:function(){var e=this.props.showing;return r.a.createElement(Le,{isShowing:e,hide:this.doHide,caps:this.caption,mode:this.mode})}}]),n}(r.a.Component);var Fe=Object(s.c)((function(e){return{showing:e.modals.modalWnd}}),(function(e){return{setVisiAction:function(t){return e({type:"SHOW_MODAL_MESSAGE",showing:t})}}}))(ze);function qe(e,t,n){xe(e,t,n),setTimeout((function(){return document.getElementById("keyModal").focus()}),1060)}var We,Re=n(44),Ue=n.n(Re),Ge="Your can`t like or dislike own posts ....",Ye=function(e){var t=e.post,n=e.likePost,a=e.dislikePost,o=e.deletePost,c=e.toggleExpandedPost,s=e.toggleEditPost,u=e.toggleInfoPanel,i=e.sharePost,l=e.current,m=e.filter,p=t.id,d=t.image,A=t.body,f=t.user,b=t.likeCount,h=t.dislikeCount,v=t.commentCount,E=t.createdAt,g=t.mycount,O=S()(E).fromNow();function y(e){e===He&&o(t.id)}return g&&"1"!==g||1===m&&l!==f.id?null:r.a.createElement(ke.a,{className:Ue.a.postCard},d&&r.a.createElement(Pe.a,{className:Ue.a.postImage,src:d.link,wrapped:!0}),r.a.createElement(ke.a.Content,null,r.a.createElement(ke.a.Meta,null,r.a.createElement("span",{className:"date"},"posted by"," ",f.username," - ",O,f.status?[r.a.createElement("br",null)," ( ".concat(f.status," )")]:void 0)),r.a.createElement(ke.a.Description,null,_e(A))),r.a.createElement(ke.a.Content,{extra:!0},l===f.id?[r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return qe(Ge)}},r.a.createElement(we.a,{name:"thumbs up"}),b),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return qe(Ge)}},r.a.createElement(we.a,{name:"thumbs down"}),h)]:[r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return n(p)}},r.a.createElement(we.a,{name:"thumbs up"}),b),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return a(p)}},r.a.createElement(we.a,{name:"thumbs down"}),h)],r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return c(p)}},r.a.createElement(we.a,{name:"comment"}),v),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return i(t)}},r.a.createElement(we.a,{name:"mail outline"}),"E-Mail"),l===f.id?function(){var e=[r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return s(p)}},r.a.createElement(we.a,{name:"edit"}),"Edit")];return o&&e.push(r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return qe("Do yor want to DELETE this post ?",!0,y)}},r.a.createElement(we.a,{name:"trash"}),"Delete")),e}():void 0,r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Ue.a.toolbarBtn,onClick:function(){return u(t)}},r.a.createElement(we.a,{name:"help"}),"Info")))},Ve=function(e){return e?e.link:"https://forwardsummit.ca/wp-content/uploads/2019/01/avatar-default.png"},Ke=n(56),Je=n.n(Ke),Qe=function(e){var t=e.comment,n=e.likeComment,a=e.dislikeComment,o=e.editComment,c=e.deleteComment,s=e.toggleInfo,u=e.current,i=t.id,l=t.body,m=t.createdAt,p=t.user,d=t.likeCou,A=t.dislikeCou;return r.a.createElement(C.a,{className:Je.a.comment},r.a.createElement(C.a.Avatar,{src:Ve(p.image)}),r.a.createElement(C.a.Content,null,r.a.createElement(C.a.Author,{as:"a"},p.username),r.a.createElement(C.a.Metadata,null,S()(m).fromNow()),r.a.createElement(C.a.Text,null,p.status?" ( ".concat(p.status," )"):void 0),r.a.createElement(C.a.Text,null,_e(l))),r.a.createElement(C.a.Content,null,r.a.createElement(C.a.Text,null,p.id===u?[r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return qe("Your can`t like or dislike own comment ....")}},r.a.createElement(we.a,{name:"thumbs up"}),d),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return qe("Your can`t like or dislike own comment ....")}},r.a.createElement(we.a,{name:"thumbs down"}),A),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return o({id:i,body:l})}},r.a.createElement(we.a,{name:"edit"}),"Edit"),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return e=i,void qe("Do yor want to DELETE this comment ?",!0,(function(t){t===He&&c(e)}));var e}},r.a.createElement(we.a,{name:"trash"}),"Delete")]:[r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return n(i)}},r.a.createElement(we.a,{name:"thumbs up"}),d),r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return a(i)}},r.a.createElement(we.a,{name:"thumbs down"}),A)],r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Je.a.toolbarBtn,onClick:function(){return s(t)}},r.a.createElement(we.a,{name:"help"}),"Info"))))},Xe=n(641),Ze=n(628),$e=function(e){var t=e.postId,n=e.addComment,o=e.updateComment,c=e.editComment,s=Object(a.useState)(""),u=Object(m.a)(s,2),i=u[0],l=u[1],p=function(){document.getElementById("submit").content="Post comment",document.getElementById("label").innerText="",We=void 0,l("")},f=function(){var e=Object(A.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(!We){e.next=7;break}return e.next=5,o({commentId:We,body:i});case 5:e.next=9;break;case 7:return e.next=9,n({postId:t,body:i});case 9:p();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c((function(e){We=e.id,document.getElementById("textArea").focus(),document.getElementById("submit").content="Save comment",document.getElementById("label").innerText="Edit Comment : ".concat(We),l(e.body)})),r.a.createElement(Xe.a,{reply:!0,onSubmit:f},r.a.createElement("div",{id:"label"}),r.a.createElement(Xe.a.TextArea,{id:"textArea",value:i,placeholder:"Type a comment...",onChange:function(e){return l(e.target.value)}}),r.a.createElement(Ze.a,{id:"submit",type:"submit",content:"Post comment",labelPosition:"left",icon:"edit",primary:!0}),r.a.createElement(Ze.a,{type:"reset",content:"Cancel",labelPosition:"left",icon:"cancel",style:{backgroundColor:"red"},onClick:p,primary:!0}))},et=n(647),tt=n(638),nt=function(){return r.a.createElement(et.a,{active:!0,inverted:!0},r.a.createElement(tt.a,{size:"massive",inverted:!0}))},at=n(303),rt=n.n(at),ot={likePost:Ee,dislikePost:ge,toggleExpandedPost:fe,toggleEditPost:be,toggleInfoPanel:he,toggleCommentPanel:ve,addComment:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p,A,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$({body:e.body,postId:e.postId});case 2:return r=t.sent,o=r.id,t.next=6,X(o);case 6:c=t.sent,s=function(e){return Object(f.a)(Object(f.a)({},e),{},{commentCount:Number(e.commentCount)+1,comments:[].concat(Object(N.a)(e.comments),[c])})},u=function(e){return Object(f.a)(Object(f.a)({},e),{},{commentCount:Number(e.commentCount)+1})},i=a(),l=i.posts,m=l.posts,p=l.expandedPost,A=m.map((function(e){return e.id!==c.postId?e:u(e)})),n(ce(A)),b=s(p),n(le(b));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},updateComment:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:r=t.sent,o=r[1],c=o.id,s=o.body,u=function(e){return Object(f.a)(Object(f.a)({},e),{},{body:s})},i=function(e){return Object(f.a)(Object(f.a)({},e),{},{commentCount:Number(e.commentCount)+1,comments:e.comments.map((function(e){return e.id!==c?e:u(e)}))})},l=a(),m=l.posts.expandedPost,p=i(m),n(le(p));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},deleteComment:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p,A,b,h,v;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(e);case 2:r=t.sent,o=r[1],c=o.id,s=o.postId,u=function(e){return Object(f.a)(Object(f.a)({},e),{},{deleted:!0})},i=function(e){return Object(f.a)(Object(f.a)({},e),{},{commentCount:Number(e.commentCount)-1,comments:e.comments.map((function(e){return e.id!==c?e:u(e)}))})},l=function(e){return Object(f.a)(Object(f.a)({},e),{},{commentCount:Number(e.commentCount)-1})},m=a(),p=m.posts,A=p.posts,b=p.expandedPost,h=A.map((function(e){return e.id!==s?e:l(e)})),n(ce(h)),v=i(b),n(le(v));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},ct=Object(s.c)((function(e){return{post:e.posts.expandedPost}}),(function(e){return Object(l.b)(ot,e)}))((function(e){var t,n=e.post,a=e.sharePost,o=e.likePost,c=e.dislikePost,s=e.likeComment,u=e.dislikeComment,i=e.toggleExpandedPost,l=e.toggleEditPost,m=e.toggleInfoPanel,p=e.toggleCommentPanel,d=e.addComment,A=e.updateComment,f=e.deleteComment,b=e.current,h=e.filter,v=function(e){return t(e)};return r.a.createElement(P.a,{className:rt.a.comentsForm,open:!0,onClose:function(){return i()}},n?r.a.createElement(P.a.Content,null,r.a.createElement(Ye,{post:n,likePost:o,dislikePost:c,toggleExpandedPost:i,toggleEditPost:l,toggleInfoPanel:m,sharePost:a,current:b,filter:h}),r.a.createElement(C.a.Group,{style:{maxWidth:"100%"}},r.a.createElement(_.a,{as:"h3",dividing:!0},"Comments"),n.comments&&n.comments.sort((function(e,t){return S()(e.createdAt).diff(t.createdAt)})).map((function(e){return e.deleted?null:r.a.createElement(Qe,{key:e.id,comment:e,likeComment:s,dislikeComment:u,deleteComment:f,editComment:v,toggleInfo:p,current:b})})),r.a.createElement($e,{postId:n.id,addComment:d,updateComment:A,editComment:function(e){t=e}}))):r.a.createElement(nt,null))})),st=n(649),ut=n(141),it=n.n(ut),lt={updatePost:Ae,toggleEditPost:be},mt=Object(s.c)((function(e){return{post:e.posts.expandedEdit}}),(function(e){return Object(l.b)(lt,e)}))((function(e){var t=e.post,n=e.uploadImage,o=e.createImage,c=e.toggleEditPost,s=e.updatePost,u=Object(a.useState)(t.body),i=Object(m.a)(u,2),l=i[0],p=i[1],f=Object(a.useState)({bodyedit:!1,linkedit:!1}),b=Object(m.a)(f,2),h=b[0],v=b[1],E=t.image?t.image.link:void 0,g=t.image?t.image.deleteHash:"",O=Object(a.useState)({link:E,deleteHash:g}),y=Object(m.a)(O,2),x=y[0],j=y[1],C=Object(a.useState)(""),_=Object(m.a)(C,2),I=_[0],S=_[1],N=Object(a.useState)(!1),T=Object(m.a)(N,2),B=T[0],M=T[1],D=t.id;function H(e){e===He&&(I&&k({tmptHash:I}),c())}var L=function(){var e=Object(A.a)(d.a.mark((function e(t){var a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,M(!0),e.prev=2,I&&k({tmptHash:I}),e.next=6,n(a.files[0]);case 6:r=e.sent,o=r.link,c=r.deleteHash,j({link:o,deleteHash:c}),v({linkedit:!0}),S(c);case 12:return e.prev=12,M(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,,12,15]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(A.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(!0!==h.linkedit){e.next=17;break}if(!t.imageId){e.next=6;break}return e.next=6,w(t.imageId);case 6:if(!x){e.next=12;break}return e.next=9,o(x);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0={};case 13:a=e.t0,n=a.id,e.next=18;break;case 17:n=t.image?t.image.id:void 0;case 18:return e.next=20,s({postId:D,body:l,imageId:n});case 20:c();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=document.getElementById("postbody");return F&&setTimeout((function(){return F.focus()}),10),r.a.createElement(P.a,{className:it.a.editForm,open:!0,onClose:function(){!0===h.bodyedit||!0===h.linkedit?qe("Changes not saved! Exit anyway ?",!0,H):c()}},r.a.createElement(P.a.Content,null,r.a.createElement(st.a,null,r.a.createElement(Xe.a,{onSubmit:z},r.a.createElement(Xe.a.TextArea,{id:"postbody",rows:"6",name:"body",value:l,placeholder:"What is the news?",onChange:function(e){v({bodyedit:!0}),p(e.target.value)}}),(null===x||void 0===x?void 0:x.link)&&r.a.createElement("div",{className:it.a.imageWrapper},r.a.createElement(Pe.a,{className:it.a.image,src:x?x.link:"",alt:"post"})),r.a.createElement(Ze.a,{color:"teal",icon:!0,labelPosition:"left",as:"label",loading:B,disabled:B},r.a.createElement(we.a,{name:"image"}),"Attach image",r.a.createElement("input",{name:"image",type:"file",onChange:L,hidden:!0})),r.a.createElement(Ze.a,{color:"yellow",icon:!0,labelPosition:"left",as:"label",loading:B,disabled:B,onClick:function(){I&&k({tmptHash:I}),j(void 0),v({linkedit:!0}),S("")}},r.a.createElement(we.a,{name:"cancel"}),"Remove image"),r.a.createElement(Ze.a,{floated:"right",color:"blue",type:"submit"},r.a.createElement(we.a,{name:"edit"}),"Save Post")))))})),pt=n(7),dt=n.n(pt),At=n(642),ft=n(57),bt=n.n(ft),ht={toggleInfoPanel:he,toggleCommentPanel:ve},vt=Object(s.c)((function(){return{toggleInfoPanel:dt.a.func.isRequired,toggleCommentPanel:dt.a.func.isRequired}}),(function(e){return Object(l.b)(ht,e)}))((function(e){var t=e.listInfo,n=e.infomode,a=void 0===n||n,o=e.toggleInfoPanel,c=e.toggleCommentPanel;var s=t.obj,u=t.taglist,i=s.body,l=s.user,m=s.createdAt;function p(e,t){for(var n=1;n<=t;n+=1)e.push(r.a.createElement(At.a.Event,{style:{height:"48px"}},r.a.createElement(At.a.Label,{style:{marginLeft:"10px"},image:""}),r.a.createElement(At.a.Content,null,"  ")))}var d=S()(m).fromNow(),A=[],f=[];return u.forEach((function(e){e.isLike?A.push(r.a.createElement(At.a.Event,{className:bt.a.infoEvent},r.a.createElement(At.a.Label,{className:bt.a.infoLabel,image:Ve(e.user.image)}),r.a.createElement(At.a.Content,null,e.user.username," - ",S()(e.createdAt).fromNow()))):f.push(r.a.createElement(At.a.Event,{className:bt.a.infoEvent},r.a.createElement(At.a.Label,{className:bt.a.infoLabel,image:Ve(e.user.image)}),r.a.createElement(At.a.Content,null,e.user.username," - ",S()(e.createdAt).fromNow())))})),A.length>f.length?p(f,A.length-f.length):p(A,f.length-A.length),r.a.createElement(P.a,{className:bt.a.infoForm,open:!0,onClose:function(){!0===a?o():c()}},r.a.createElement(P.a.Content,null,r.a.createElement(ke.a,{className:bt.a.infoTopCard},r.a.createElement(ke.a.Content,null,r.a.createElement(ke.a.Meta,null,r.a.createElement("span",{className:"date"},a?"Posted by ":"Comment by "," ",l.username," - ",d)),r.a.createElement(ke.a.Description,null,_e(i)))),r.a.createElement(ke.a.Group,null,r.a.createElement(ke.a,{id:bt.a.infoCard},r.a.createElement(ke.a.Content,null,r.a.createElement(_.a,{dividing:!0},"Likes :")),r.a.createElement(At.a,null,A)),r.a.createElement(ke.a,{id:bt.a.infoCard},r.a.createElement(ke.a.Content,null,r.a.createElement(_.a,{dividing:!0},"DisLikes :")),r.a.createElement(At.a,null,f)))))})),Et=n(192),gt=n.n(Et),Ot=function(e){var t=e.addPost,n=e.uploadImage,o=e.createImage,c=Object(a.useState)(""),s=Object(m.a)(c,2),u=s[0],i=s[1],l=Object(a.useState)(void 0),p=Object(m.a)(l,2),f=p[0],b=p[1],h=Object(a.useState)(""),v=Object(m.a)(h,2),E=v[0],g=v[1],O=Object(a.useState)(!1),y=Object(m.a)(O,2),x=y[0],j=y[1],w=function(){var e=Object(A.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=2;break}return e.abrupt("return");case 2:if(g(""),!f){e.next=9;break}return e.next=6,o(f);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0={};case 10:return n=e.t0,a=n.id,e.next=14,t({imageId:a,body:u});case 14:i(""),b(void 0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(A.a)(d.a.mark((function e(t){var a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,j(!0),e.prev=2,E&&k({tmptHash:E}),e.next=6,n(a.files[0]);case 6:r=e.sent,o=r.link,c=r.deleteHash,b({link:o,deleteHash:c}),g(c);case 11:return e.prev=11,j(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,,11,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(st.a,null,r.a.createElement(Xe.a,{onSubmit:w},r.a.createElement(Xe.a.TextArea,{name:"body",value:u,placeholder:"What is the news?",onChange:function(e){return i(e.target.value)}}),f&&r.a.createElement("div",{className:gt.a.imageWrapper},r.a.createElement(Pe.a,{className:gt.a.image,src:f.link,alt:"post"})),r.a.createElement(Ze.a,{color:"teal",icon:!0,labelPosition:"left",as:"label",loading:x,disabled:x},r.a.createElement(we.a,{name:"image"}),"Attach image",r.a.createElement("input",{name:"image",type:"file",onChange:P,hidden:!0})),r.a.createElement(Ze.a,{floated:"right",color:"blue",type:"submit"},r.a.createElement(we.a,{name:"edit"}),"Add Post")))},yt=n(644),xt=n(637),jt=n(639),wt=n(50),kt=n.n(wt);function Pt(e){var t="";return e.split(Ce).forEach((function(e){t+="".concat(e," <br />")})),t}function Ct(e){var t;return"".concat('<table cellpadding="0" cellspacing="0" left="100" width="600"><tr> <td width="100"> </td> <td> <h3> Message : <br /></h3></td> </tr>'," ").concat((t=e.image)?"".concat(U," ").concat('<img width="500" style="display: block;" alt="\u0421\u041c\u0421 \u0438 Email \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433" src="'," ").concat(t.link," ").concat('"></img>'," ").concat("</td> </tr>"," <br />"):"")+"".concat(U," ").concat(Pt(e.body)," ").concat("</td> </tr>"," ").concat("</table>")}function _t(e,t){return"".concat(R," <h3> ").concat(Pt(e)," </h3> ").concat(Ct(t))+'<h3><a href="'.concat("https://mini-chat-server-00.herokuapp.com","/share:").concat(t.id,'">')+"This message available via link</a></h3> ".concat("</body> </html>")}var It=function(e){var t=e.post,n=e.current,o=e.signature,c=e.close,s=t.body,u=t.image,i=t.user,l=t.createdAt,p=function(e){try{var t=localStorage.getItem("mstate_".concat(e));return null===t?{curAdress:void 0,curThema:void 0,curList:void 0}:JSON.parse(t)}catch(n){return{curAdress:void 0,curThema:void 0,curList:void 0}}}(n),f=p.curAdress,b=p.curThema,h=void 0===b?"Would you look through new post ?":b,v=p.curList,E=void 0===v?[]:v,g=Object(a.useState)(f),O=Object(m.a)(g,2),y=O[0],x=O[1],j=Object(a.useState)(h),w=Object(m.a)(j,2),k=w[0],C=w[1],_=Object(a.useState)(E),I=Object(m.a)(_,2),S=I[0],T=I[1],B=Object(a.useState)(" Hello !".concat(Ce," User ").concat(i.username," posted interesting message ").concat(V(l),".")+"".concat(Ce," Have a nice day ! ").concat(Ce," ").concat(o)),M=Object(m.a)(B,2),D=M[0],H=M[1],L=function(){var e=Object(A.a)(d.a.mark((function e(a){var r,o,s,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a!==He){e.next=9;break}return Y(n,{curAdress:y,curThema:k,curList:S}),r=_t(D,t),e.next=5,Oe({email:y,mailThema:k,htmlText:r});case 5:o=e.sent,s=o.rejected,(u=o.response).indexOf("OK")>0?c():qe("Error : ".concat(s," ").concat(u));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(P.a,{className:kt.a.modalForm,open:!0,onClose:c},r.a.createElement(P.a.Header,{className:kt.a.header},r.a.createElement("span",null,"Share Post")),r.a.createElement(P.a.Content,null,r.a.createElement(Xe.a,{onSubmit:function(){return qe("Send Mail ?",!0,L)}},r.a.createElement(je.a,{className:kt.a.modalLabel},r.a.createElement(we.a,{name:"user"}),"Adress :"),r.a.createElement(yt.a,{style:{float:"left",width:"77%"},fluid:!0,multiple:!0,search:function(e,t){return e.filter((function(e){return e.text.toLowerCase().startsWith(t.toLowerCase())}))},selection:!0,placeholder:"Select Friend",value:y,allowAdditions:!0,onChange:function(e,t){var n=t.value;x(n)},onAddItem:function(e,t){var n=[].concat(Object(N.a)(S),[{key:t.value,value:t.value,text:t.value}]);T(n)},options:S}),r.a.createElement("div",{className:kt.a.modalClear}),r.a.createElement("br",null),r.a.createElement(je.a,{className:kt.a.modalLabel},r.a.createElement(we.a,{name:"write"}),"Subject :"),r.a.createElement(xt.a,{fluid:!0,className:"modalInput",value:k,onChange:function(e){return C(e.target.value)}}),r.a.createElement("div",{className:kt.a.modalClear}),r.a.createElement("br",null),r.a.createElement(Xe.a.TextArea,{rows:"5",id:"postbody",name:"body",value:D,placeholder:"What is the news?",onChange:function(e){return H(e.target.value)}}),r.a.createElement(ke.a,{className:kt.a.modalCard},(null===u||void 0===u?void 0:u.link)&&r.a.createElement("div",{className:kt.a.imageWrapper},r.a.createElement(Pe.a,{className:kt.a.image,src:u?u.link:"",alt:"post"})),r.a.createElement(jt.a,null),r.a.createElement(ke.a.Description,null,_e(s))),r.a.createElement(Ze.a,{floated:"right",color:"blue",type:"submit"},r.a.createElement(we.a,{name:"external"}),"Send Mail"),r.a.createElement("br",null),r.a.createElement("br",null))))},St=n(636),Nt=n(138),Tt=n.n(Nt),Bt=n(142),Mt=n.n(Bt),Dt={userId:void 0,mode:!1,from:0,count:10},Ht=function(e){var t=e.userId,n=e.username,o=e.loadPosts,c=e.loadMorePosts,s=e.posts,u=void 0===s?[]:s,i=e.expandedPost,l=e.expandedEdit,p=e.expandedPostInfo,d=e.expandedCommentInfo,A=e.hasMorePosts,f=e.addPost,b=e.updatePost,h=e.likePost,v=e.dislikePost,E=e.deletePost,g=e.likeComment,O=e.dislikeComment,y=e.toggleExpandedPost,w=e.toggleEditPost,k=e.toggleInfoPanel,P=Object(a.useState)(void 0),C=Object(m.a)(P,2),_=C[0],I=C[1],S=Object(a.useState)(!1),N=Object(m.a)(S,2),T=N[0],B=N[1],M=Object(a.useState)(!1),D=Object(m.a)(M,2),H=D[0],L=D[1],z=Object(a.useState)(!1),F=Object(m.a)(z,2),q=F[0],W=F[1];var R=function(e){I(e)},U=function(e){return x(e)},G=function(e){return j(e)};return r.a.createElement("div",{className:Mt.a.threadContent},r.a.createElement("div",{className:Mt.a.addPostForm},r.a.createElement(Ot,{addPost:f,uploadImage:U,createImage:G})),r.a.createElement("div",{className:Mt.a.toolbar},r.a.createElement(St.a,{toggle:!0,label:"Only my posts",checked:T,onChange:function(){L(!1),W(!1),B(!T),Dt.userId=T?void 0:t,Dt.mode=T?0:1,Dt.from=0,o(Dt),Dt.from=Dt.count},style:{marginLeft:"3px"}}),r.a.createElement(St.a,{toggle:!0,label:"Hide my posts",checked:H,onChange:function(){B(!1),W(!1),L(!H),Dt.userId=H?void 0:t,Dt.mode=2,Dt.from=0,o(Dt),Dt.from=Dt.count},style:{marginLeft:"10px"}}),r.a.createElement(St.a,{toggle:!0,label:"Liked posts",checked:q,onChange:function(){B(!1),L(!1),W(!q),Dt.userId=q?void 0:t,Dt.mode=3,Dt.from=0,o(Dt),Dt.from=Dt.count},style:{marginLeft:"10px"}})),r.a.createElement(Tt.a,{pageStart:0,loadMore:function(){c(Dt);var e=Dt.from,t=Dt.count;Dt.from=e+t},hasMore:A,loader:r.a.createElement(tt.a,{active:!0,inline:"centered",key:0})},u.map((function(e){return r.a.createElement(Ye,{post:e,likePost:h,dislikePost:v,deletePost:E,toggleExpandedPost:y,toggleEditPost:w,toggleInfoPanel:k,sharePost:R,current:t,filter:Dt.mode})}))),i&&r.a.createElement(ct,{sharePost:R,likeComment:g,dislikeComment:O,current:t,filter:Dt}),l&&r.a.createElement(mt,{post:i,uploadImage:U,createImage:G,toggleEditPost:w,updatePost:b}),p&&r.a.createElement(vt,{listInfo:p}),d&&r.a.createElement(vt,{listInfo:d,infomode:!1}),_&&r.a.createElement(It,{post:_,current:t,signature:n,close:function(){return I(void 0)}}))};Ht.defaultProps={posts:[],hasMorePosts:!0,expandedPost:void 0,expandedEdit:void 0,expandedPostInfo:void 0,expandedCommentInfo:void 0,userId:void 0,username:void 0};var Lt,zt={loadPosts:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:a=t.sent,n(ce(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},loadMorePosts:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a(),o=r.posts.posts,t.next=3,T(e);case 3:c=t.sent,s=c.filter((function(e){return!(o&&o.some((function(t){return e.id===t.id})))})),n(se(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},likePost:Ee,dislikePost:ge,deletePost:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:if(r=t.sent,o=r[1].id,c=a(),s=c.posts.posts,u=[],s.map((function(e){return e.id!==o&&u.push(e),e})),n(ce(u)),i=a(),!(l=i.arhiv.posts)){t.next=15;break}return t.next=12,H(e);case 12:m=t.sent,p=[m].concat(Object(N.a)(l)),n(ie(p));case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},likeComment:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:r=t.sent,o=r.id,c=r.dopp,s=o?1:-1,u=function(e){return Object(f.a)(Object(f.a)({},e),{},{likeCou:Number(e.likeCou)+s,dislikeCou:Number(e.dislikeCou)-c})},i=function(t){return Object(f.a)(Object(f.a)({},t),{},{comments:t.comments.map((function(t){return t.id!==e?t:u(t)}))})},l=a(),m=l.posts.expandedPost,p=i(m),n(le(p));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},dislikeComment:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(e);case 2:r=t.sent,o=r.id,c=r.dopp,s=o?1:-1,u=function(e){return Object(f.a)(Object(f.a)({},e),{},{dislikeCou:Number(e.dislikeCou)+s,likeCou:Number(e.likeCou)-c})},i=function(t){return Object(f.a)(Object(f.a)({},t),{},{comments:t.comments.map((function(t){return t.id!==e?t:u(t)}))})},l=a(),m=l.posts.expandedPost,p=i(m),n(le(p));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},toggleExpandedPost:fe,toggleEditPost:be,toggleInfoPanel:he,addPost:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){var a,r,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:return a=t.sent,r=a.id,t.next=6,H(r);case 6:o=t.sent,n(ue(o));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updatePost:Ae},Ft=Object(s.c)((function(e){return{posts:e.posts.posts,hasMorePosts:e.posts.hasMorePosts,expandedPost:e.posts.expandedPost,expandedEdit:e.posts.expandedEdit,expandedPostInfo:e.posts.expandedPostInfo,expandedCommentInfo:e.posts.expandedCommentInfo,userId:e.profile.user.id,username:e.profile.user.username}}),(function(e){return Object(l.b)(zt,e)}))(Ht),qt=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({endpoint:"/api/auth/login",type:"POST",request:t});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{user:null,token:null});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({endpoint:"/api/auth/register",type:"POST",request:t});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{user:null,token:null});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(A.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({endpoint:"/api/auth/user",type:"GET"});case 3:return t=e.sent,e.abrupt("return",t.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({endpoint:"/pass/user/newpwd",type:"GET",query:{userHash:t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O({endpoint:"/api/auth/",type:"PUT",request:t});case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(A.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({endpoint:"/pass/user/email/",type:"GET",query:{mail:t}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vt="PROFILE_ACTION:SET_USER",Kt=function(e){return localStorage.setItem("token",e)},Jt=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:Vt,user:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,a){Kt(t),Jt(e)(n,a)}},Xt=function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return r=t.sent,o=r.user,c=r.token,Qt(o,c)(n,a),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Zt=function(e){return Yt(e)},$t=n(313),en=n.n($t),tn=function(){return r.a.createElement(_.a,{as:"h2",color:"grey",className:en.a.logoWrapper},r.a.createElement(Pe.a,{circular:!0,src:"https://raw.githubusercontent.com/GarryFirst-cripto/resurses/master/pictures/mini_chat_logo.png"})," ","Mini Chat")},nn=n(650),an=n(646),rn=n(29),on=n(39),cn=n.n(on),sn=function(e){var t=e.login,n=Object(a.useState)(Ie()),o=Object(m.a)(n,2),c=o[0],s=o[1],u=Object(a.useState)(""),i=Object(m.a)(u,2),l=i[0],p=i[1],f=Object(a.useState)(!1),b=Object(m.a)(f,2),h=b[0],v=b[1],E=Object(a.useState)(!0),g=Object(m.a)(E,2),O=g[0],y=g[1],x=Object(a.useState)(!0),j=Object(m.a)(x,2),w=j[0],k=j[1],P=function(){var e=Object(A.a)(d.a.mark((function e(){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=O&&w)&&!h){e.next=4;break}return n||qe("You must enter the correct data !"),e.abrupt("return");case 4:return v(!0),e.prev=5,a=c.toLowerCase(),e.next=9,t({email:a,password:l});case 9:r=e.sent,v(!1),r||qe("Access denied ! Invalid e-mail address or password."),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),v(!1);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Xe.a,{name:"loginForm",size:"large",onSubmit:P},r.a.createElement(st.a,null,r.a.createElement(Xe.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"Email",type:"email",value:c,error:!O,onChange:function(e){return t=e.target.value,s(t),y(!0),void Se(t);var t},onBlur:function(){return y(c&&cn.a.isEmail(c))}}),r.a.createElement(Xe.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",error:!w,onChange:function(e){return t=e.target.value,p(t),void k(!0);var t},onBlur:function(){return k(Boolean(l))}}),r.a.createElement(Ze.a,{type:"submit",color:"teal",fluid:!0,size:"large",loading:h,primary:!0,onClick:function(){y(c&&cn.a.isEmail(c)),k(Boolean(l))}},"Login")))},un={login:function(e){return Xt(qt(e))}},ln=Object(s.c)(null,(function(e){return Object(l.b)(un,e)}))((function(e){var t=e.login;return r.a.createElement(nn.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},r.a.createElement(nn.a.Column,{style:{maxWidth:450}},r.a.createElement(tn,null),r.a.createElement(_.a,{as:"h2",color:"teal",textAlign:"center"},"Login to your account"),r.a.createElement(sn,{login:t}),r.a.createElement(an.a,null,r.a.createElement("div",{style:{width:"45%",float:"left"}},"New to us?"," ",r.a.createElement(rn.a,{exact:!0,to:"/registration"},"Sign Up")),r.a.createElement("div",{style:{width:"45%",float:"left"}},"Forgot Password ?"," ",r.a.createElement(rn.a,{exact:!0,to:"/resetpassword"},"Reset")),r.a.createElement("div",{style:{clear:"both"}}))))})),mn=function(e){var t=e.register,n=Object(a.useState)(Ie()),o=Object(m.a)(n,2),c=o[0],s=o[1],u=Object(a.useState)(""),i=Object(m.a)(u,2),l=i[0],p=i[1],f=Object(a.useState)(""),b=Object(m.a)(f,2),h=b[0],v=b[1],E=Object(a.useState)(!1),g=Object(m.a)(E,2),O=g[0],y=g[1],x=Object(a.useState)(!0),j=Object(m.a)(x,2),w=j[0],k=j[1],P=Object(a.useState)(!0),C=Object(m.a)(P,2),_=C[0],I=C[1],S=Object(a.useState)(!0),N=Object(m.a)(S,2),T=N[0],B=N[1],M=function(){var e=Object(A.a)(d.a.mark((function e(){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=w&&_&&T)&&!O){e.next=4;break}return n||qe("You must enter the correct data !"),e.abrupt("return");case 4:return y(!0),e.prev=5,a=c.toLowerCase(),e.next=9,t({email:a,password:l,username:h});case 9:r=e.sent,y(!1),r||qe("Registration denied ! Try to use another user name or e-mail address."),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),y(!1);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Xe.a,{name:"registrationForm",size:"large",onSubmit:M},r.a.createElement(st.a,null,r.a.createElement(Xe.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"Email",type:"email",value:c,error:!w,onChange:function(e){return t=e.target.value,s(t),k(!0),void Se(t);var t},onBlur:function(){return k(c&&cn.a.isEmail(c))}}),r.a.createElement(Xe.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",type:"text",error:!_,onChange:function(e){return t=e.target.value,v(t),void I(!0);var t},onBlur:function(){return I(Boolean(h))}}),r.a.createElement(Xe.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",onChange:function(e){return t=e.target.value,p(t),void B(!0);var t},error:!T,onBlur:function(){return B(cn.a.isLength(l,{min:5}))}}),r.a.createElement(Ze.a,{type:"submit",color:"teal",fluid:!0,size:"large",loading:O,primary:!0,onClick:function(){I(Boolean(h)),k(c&&cn.a.isEmail(c)),B(Boolean(l))}},"Register")))},pn={register:function(e){return Xt(Wt(e))}},dn=Object(s.c)(null,(function(e){return Object(l.b)(pn,e)}))((function(e){var t=e.register;return r.a.createElement(nn.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},r.a.createElement(nn.a.Column,{style:{maxWidth:450}},r.a.createElement(tn,null),r.a.createElement(_.a,{as:"h2",color:"teal",textAlign:"center"},"Register for free account"),r.a.createElement(mn,{register:t}),r.a.createElement(an.a,null,"Alredy with us?"," ",r.a.createElement(rn.a,{exact:!0,to:"/login"},"Sign In"))))})),An="https://mini-chat-server-00.herokuapp.com",fn=function(){var e=Object(a.useState)(Ie()),t=Object(m.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!0),s=Object(m.a)(c,2),u=s[0],l=s[1],p=Object(a.useState)(!1),f=Object(m.a)(p,2),b=f[0],h=f[1],v=Object(a.useState)(!1),E=Object(m.a)(v,2),g=E[0],O=E[1],y=function(){var e=Object(A.a)(d.a.mark((function e(){var t,a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&!b){e.next=3;break}return u||qe("You must enter the correct e-mail !"),e.abrupt("return");case 3:return h(!0),e.prev=4,e.next=7,Zt(n);case 7:if(""===(t=e.sent).isUser){e.next=18;break}return a=G(An,n,t.isUser),e.next=12,ye({email:n,mailThema:"Password reset request !",htmlText:a,origin:An});case 12:r=e.sent,o=r.rejected,(c=r.response).indexOf("OK")>0?(qe("We sent an email to your address to reset password !"),O(!0)):qe("Error : ".concat(o," ").concat(c)),e.next=19;break;case 18:qe("We do not have a user with this E-mail ...");case 19:h(!1),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),qe("Error !"),h(!1);case 26:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Xe.a,{name:"registrationForm",size:"large",onSubmit:y},r.a.createElement(st.a,null,r.a.createElement(Xe.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"Email",type:"email",value:n,error:!u,onChange:function(e){return t=e.target.value,o(t),l(!0),void Se(t);var t},onBlur:function(){return l(n&&cn.a.isEmail(n))}}),r.a.createElement(Ze.a,{type:"submit",color:"teal",fluid:!0,size:"large",loading:b,primary:!0,onClick:function(){l(n&&cn.a.isEmail(n))}},"Reset Password")),g&&r.a.createElement(i.a,{to:"/login"}))},bn=function(){return r.a.createElement(nn.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},r.a.createElement(nn.a.Column,{style:{maxWidth:450}},r.a.createElement(tn,null),r.a.createElement(_.a,{as:"h2",color:"teal",textAlign:"center"},"Reset Your Password"),r.a.createElement(fn,null),r.a.createElement(an.a,null,"Recall password ?"," ",r.a.createElement(rn.a,{exact:!0,to:"/login"},"Sign In"))))},hn=n(314),vn=n.n(hn),En=n(100),gn=(n(623),function(e){var t=e.user,n=e.applyPost,o=e.updatePost,c=e.deletePost,s=vn()("https://mini-chat-server-00.herokuapp.com");return Lt=s,Object(a.useEffect)((function(){if(t)return s.on("newRoom",(function(){var e=t.id,n=t.username;s.emit("createRoom",{id:e,username:n})})),s.on("like",(function(e){En.NotificationManager.info("Your post was liked!"),o(e)})),s.on("join",(function(e){En.NotificationManager.info("User ".concat(e," joined to us !"))})),s.on("leave",(function(e){En.NotificationManager.info("User ".concat(e," leaved us !"))})),s.on("add_post",(function(e){n(e)})),s.on("upd_post",(function(e){o(e)})),s.on("dell_post",(function(e){c(e)})),function(){s.close()}})),r.a.createElement(En.NotificationContainer,null)});gn.defaultProps={user:void 0};var On=gn,yn=n(101),xn=n.n(yn),jn=function(){},wn=function(e){var t=e.user,n=e.logout;return r.a.createElement("div",{className:xn.a.headerWrp},r.a.createElement(nn.a,{centered:!0,container:!0,columns:"3"},r.a.createElement(nn.a.Column,null,t&&r.a.createElement(rn.a,{exact:!0,to:"/arhiv",onClick:function(e){return jn(e,"/arhiv")}},r.a.createElement(_.a,null,r.a.createElement(Pe.a,{src:"https://novogrodovka-rada.gov.ua/images/news/2017/8/1.jpg"})," ","Arhiv"," ",t.username))),r.a.createElement(nn.a.Column,null,t&&r.a.createElement(rn.a,{exact:!0,to:"/",onClick:function(e){return jn(e,"/")}},r.a.createElement(_.a,null,r.a.createElement(Pe.a,{circular:!0,src:Ve(t.image)})," ",t.username))),r.a.createElement(nn.a.Column,{textAlign:"right"},r.a.createElement(rn.a,{exact:!0,activeClassName:"active",to:"/profile",className:xn.a.menuBtn},r.a.createElement(we.a,{name:"user circle",size:"large"}),"User profile"),r.a.createElement(Ze.a,{basic:!0,icon:!0,type:"button",className:"".concat(xn.a.menuBtn," ").concat(xn.a.logoutBtn),onClick:function(){Lt&&Lt.close(),n()}},r.a.createElement(we.a,{name:"log out",size:"large"})))))},kn=n(87),Pn=n.n(kn),Cn="/",_n=function(e){var t=e.user,n=e.updateUser,o=Ve(t.image),c=function(e){return e?e.deleteHash:""}(t.image),s=Object(a.useState)({link:o,deleteHash:c}),u=Object(m.a)(s,2),l=u[0],p=u[1],f=Object(a.useState)(""),b=Object(m.a)(f,2),h=b[0],v=b[1],E=Object(a.useState)(!1),g=Object(m.a)(E,2),O=g[0],y=g[1],P=Object(a.useState)(t.username),C=Object(m.a)(P,2),_=C[0],I=C[1],S=Object(a.useState)(t.email),N=Object(m.a)(S,2),T=N[0],B=N[1],M=Object(a.useState)(""),D=Object(m.a)(M,2),H=D[0],L=D[1],z=Object(a.useState)(t.status),F=Object(m.a)(z,2),q=F[0],W=F[1],R=Object(a.useState)({viewMode:"password",iconName:"unhide"}),U=Object(m.a)(R,2),G=U[0],Y=U[1],V=Object(a.useState)({dataedit:!1,imgedit:!1}),K=Object(m.a)(V,2),J=K[0],Q=K[1],X=Object(a.useState)(!1),Z=Object(m.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)(!1),ne=Object(m.a)(te,2),ae=ne[0],re=ne[1],oe=Object(a.useState)(!0),ce=Object(m.a)(oe,2),se=ce[0],ue=ce[1],ie=Object(a.useState)(!0),le=Object(m.a)(ie,2),me=le[0],pe=le[1],de=Object(a.useState)(!0),Ae=Object(m.a)(de,2),fe=Ae[0],be=Ae[1],he=function(){var e=Object(A.a)(d.a.mark((function e(t){var n,a,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,y(!0),e.prev=2,h&&k({tmptHash:h}),e.next=6,x(n.files[0]);case 6:a=e.sent,r=a.link,o=a.deleteHash,p({link:r,deleteHash:o}),Q({imgedit:!0}),v(o);case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,,12,15]])})));return function(t){return e.apply(this,arguments)}}();function ve(e){e===He&&(h&&k({tmptHash:h}),Q(!1,!1),ee(!0))}function Ee(){return ge.apply(this,arguments)}function ge(){return(ge=Object(A.a)(d.a.mark((function e(){var a,r,o,c,s,u,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=se&&me&&fe)&&!ae){e.next=4;break}return a||qe("You must enter the correct data !"),e.abrupt("return");case 4:if(re(!0),Cn="/",e.prev=6,!0!==J.imgedit){e.next=21;break}if(v(""),!t.imageId){e.next=12;break}return e.next=12,w(t.imageId);case 12:if(!l){e.next=18;break}return e.next=15,j(l);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=void 0;case 19:o=e.t0,r=o.id;case 21:return e.next=23,Gt({username:_,email:T,password:H,status:q,imageId:r});case 23:c=e.sent,s=c.error,u=c.text,i=c.status,re(!1),!0===s?qe("Error ".concat(i," : ").concat(u)):(n(),Q(!1,!1),ee(!0)),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(6),re(!1);case 32:case"end":return e.stop()}}),e,null,[[6,29]])})))).apply(this,arguments)}function Oe(e,t){var n=""!==e;return n||qe("ERROR ! Field ".concat(t," will not by empty !")),n}function ye(e){e===He&&Ee()}return jn=function(e,t){Cn=t,!0!==J.dataedit&&!0!==J.imgedit||(qe("Profile changes not saved! Exit anyway ?",!0,ve),e.preventDefault())},r.a.createElement(nn.a,{container:!0,textAlign:"center",style:{paddingTop:30}},r.a.createElement(nn.a.Column,null,r.a.createElement(Pe.a,{centered:!0,src:l.link,size:"medium",circular:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ze.a,{color:"violet",icon:!0,labelPosition:"left",as:"label",loading:O,disabled:O},r.a.createElement(we.a,{name:"image"}),"Select Avatar",r.a.createElement("input",{name:"image",type:"file",onChange:he,hidden:!0})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(xt.a,{className:Pn.a.profInput,icon:"user",iconPosition:"left",placeholder:"Username",type:"text",value:_,error:!me,onChange:function(e){Q({dataedit:!0}),I(e.target.value)},onBlur:function(){return pe(Boolean(_))}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(xt.a,{className:Pn.a.profInput,icon:"envelope outline",iconPosition:"left",placeholder:"Email",type:"email",value:T,error:!se,onChange:function(e){Q({dataedit:!0}),B(e.target.value)},onBlur:function(){return ue(T&&cn.a.isEmail(T))}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(xt.a,{className:Pn.a.profPass,icon:"privacy",iconPosition:"left",placeholder:"Set new password",type:G.viewMode,value:H,error:!fe,onChange:function(e){Q({dataedit:!0}),L(e.target.value)},onBlur:function(){return be(!H||cn.a.isLength(H,{min:5}))}}),r.a.createElement(Ze.a,{className:Pn.a.profButton,onClick:function(){"password"===G.viewMode?Y({viewMode:"text",iconName:"hide"}):Y({viewMode:"password",iconName:"unhide"})}},r.a.createElement(we.a,{name:G.iconName})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(xt.a,{className:Pn.a.profInput,icon:"flag checkered",iconPosition:"left",placeholder:"Status",type:"text",value:q,onChange:function(e){Q({dataedit:!0}),W(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ze.a,{color:"green",onClick:function(){!0===(Oe(_,"username")&&Oe(T,"E-mail")&&function(e){var t=!e;return t||qe("ATTENTION ! Your password will be changed !",!0,ye),t}(H))&&Ee()},loading:ae},r.a.createElement(we.a,{name:"edit"}),"Save user profile"),r.a.createElement("br",null),r.a.createElement("br",null)),$&&r.a.createElement(i.a,{to:Cn}))};_n.defaultProps={user:{}};var In={updateUser:function(){return function(){var e=Object(A.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt();case 2:a=e.sent,Jt(a)(t,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},Sn=Object(s.c)((function(e){return{user:e.profile.user}}),(function(e){return Object(l.b)(In,e)}))(_n),Nn=n(195),Tn=n.n(Nn),Bn=function(e){var t=e.post,n=e.restorePost,a=t.id,o=t.image,c=t.body,s=t.createdAt,u=S()(s).fromNow();return r.a.createElement(ke.a,{className:Tn.a.arhivCard},o&&r.a.createElement(Pe.a,{src:o.link,wrapped:!0,ui:!1}),r.a.createElement(ke.a.Content,null,r.a.createElement(ke.a.Meta,null,r.a.createElement("span",{className:"date"},u)),r.a.createElement(ke.a.Description,null,_e(c))),r.a.createElement(ke.a.Content,{extra:!0},r.a.createElement(je.a,{basic:!0,size:"small",as:"a",className:Tn.a.toolbarBtn,onClick:function(){return n(a)}},r.a.createElement(we.a,{name:"undo"}),"Restore")))},Mn=function(e){return{type:"LOAD_ARHIV_POSTS",posts:e}},Dn=function(e){return{type:"LOAD_ARHIV_MORE",posts:e}},Hn=function(e){return{type:oe,posts:e}},Ln=n(196),zn=n.n(Ln),Fn={userId:void 0,mode:!1,from:0,count:10},qn=function(e){var t=e.userId,n=e.loadMorePosts,a=e.restorePost,o=e.posts,c=void 0===o?[]:o,s=e.hasMorePosts;return r.a.createElement("div",{className:zn.a.threadContent},r.a.createElement(ke.a,{className:zn.a.arhivCard},"Post Arhivs (deleted posts)"),r.a.createElement(Tt.a,{pageStart:0,loadMore:function(){Fn.userId=t,n(Fn);var e=Fn.from,a=Fn.count;Fn.from=e+a},hasMore:s,loader:r.a.createElement(tt.a,{active:!0,inline:"centered",key:0})},c.map((function(e){return r.a.createElement(Bn,{post:e,current:t,restorePost:a})}))))};qn.defaultProps={posts:[],hasMorePosts:!0,userId:void 0};var Wn={loadMorePosts:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a(),o=r.arhiv.posts,t.next=3,z(e);case 3:c=t.sent,s=c.filter((function(e){return!(o&&o.some((function(t){return e.id===t.id})))})),n(Dn(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},restorePost:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:if(r=t.sent,o=r[1].id,c=a(),s=c.arhiv.posts,u=[],s.map((function(e){return e.id!==o&&u.push(e),e})),n(Mn(u)),i=a(),!(l=i.posts.posts)){t.next=15;break}return t.next=12,H(e);case 12:m=t.sent,p=[m].concat(Object(N.a)(l)),n(Hn(p));case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},Rn=Object(s.c)((function(e){return{posts:e.arhiv.posts,hasMorePosts:e.arhiv.hasMorePosts,userId:e.profile.user.id}}),(function(e){return Object(l.b)(Wn,e)}))(qn),Un=function(e){var t=e.match,n=e.toggleExpandedPost;return Object(a.useEffect)((function(){n(t.params.postHash)})),r.a.createElement(i.a,{to:"/"})};Un.defaultProps={match:void 0};var Gn={toggleExpandedPost:fe},Yn=Object(s.c)(null,(function(e){return Object(l.b)(Gn,e)}))(Un),Vn=function(){return r.a.createElement(_.a,{as:"h2",icon:!0,textAlign:"center",style:{marginTop:50}},r.a.createElement(we.a,{name:"frown",circular:!0}),r.a.createElement(_.a.Content,null,r.a.createElement("div",null,"404 Not Found"),"Go to ",r.a.createElement(rn.a,{to:"/"},"Home")," page"))},Kn=n(140),Jn=function(e){var t=e.component,n=e.isAuthorized,a=Object(Kn.a)(e,["component","isAuthorized"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};Jn.defaultProps={isAuthorized:!1,location:void 0};var Qn=Object(s.c)((function(e){return{isAuthorized:e.profile.isAuthorized}}))(Jn),Xn=function(e){var t=e.component,n=e.isAuthorized,a=Object(Kn.a)(e,["component","isAuthorized"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(i.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(t,e)}}))};Xn.defaultProps={isAuthorized:!1,location:void 0};var Zn=Object(s.c)((function(e){return{isAuthorized:e.profile.isAuthorized}}))(Xn),$n=function(e){var t=e.user,n=e.isAuthorized,o=e.applyNewPost,c=e.applyUpdatePost,s=e.applyDeletePost,u=e.logout,l=e.loadCurrentUser,m=e.isLoading;return Object(a.useEffect)((function(){n||l()})),m?r.a.createElement(nt,null):r.a.createElement("div",{className:"fill"},n&&r.a.createElement("header",null,r.a.createElement(wn,{user:t,logout:u})),r.a.createElement("main",{className:"fill"},r.a.createElement(i.d,null,r.a.createElement(Zn,{exact:!0,path:"/login",component:ln}),r.a.createElement(Zn,{exact:!0,path:"/registration",component:dn}),r.a.createElement(Zn,{exact:!0,path:"/resetpassword",component:bn}),r.a.createElement(Qn,{exact:!0,path:"/",component:Ft}),r.a.createElement(Qn,{exact:!0,path:"/profile",component:Sn}),r.a.createElement(Qn,{exact:!0,path:"/arhiv",component:Rn}),r.a.createElement(Qn,{path:"/share/:postHash",component:Yn}),r.a.createElement(i.b,{path:"*",exact:!0,component:Vn}))),r.a.createElement(On,{applyPost:o,updatePost:c,deletePost:s,user:t}))};$n.defaultProps={isAuthorized:!1,user:{},isLoading:!0};var ea={loadCurrentUser:function(){return function(){var e=Object(A.a)(d.a.mark((function e(t,n){var a,r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/newpassword"!==window.location.pathname){e.next=11;break}return e.next=3,Ut(window.location.search);case 3:a=e.sent,r=a.token,o=a.user,Kt(r),Jt(o)(t,n),window.location.href="/",e.next=15;break;case 11:return e.next=13,Rt();case 13:c=e.sent,Jt(c)(t,n);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},logout:function(){localStorage.clear(),window.location.href="/"},applyNewPost:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),!r.posts.posts){t.next=6;break}return t.next=4,H(e);case 4:o=t.sent,n(ue(o));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},applyUpdatePost:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c,s,u,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(e);case 2:r=t.sent,o=function(){return Object(f.a)({},r)},c=a(),s=c.posts,u=s.posts,i=s.expandedPost,l=u.map((function(t){return t.id!==e?t:o()})),n(ce(l)),i&&i.id===e&&n(le(o()));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},applyDeletePost:function(e){return function(){var t=Object(A.a)(d.a.mark((function t(n,a){var r,o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a(),o=r.posts.posts,c=[],o.map((function(t){return t.id!==e&&c.push(t),t})),n(ce(c));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},ta=Object(s.c)((function(e){var t=e.profile;return{isAuthorized:t.isAuthorized,user:t.user,isLoading:t.isLoading}}),(function(e){return Object(l.b)(ea,e)}))($n),na=n(287),aa=n(315),ra=n(38),oa={modalWnd:!1},ca=Object(ra.a)(),sa=[aa.a,Object(na.a)(ca)],ua=Object(l.d)(l.a.apply(void 0,sa)),ia={posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(f.a)(Object(f.a)({},e),{},{posts:t.posts,hasMorePosts:Boolean(t.posts.length)});case"POST_ACTION:LOAD_MORE_POSTS":return Object(f.a)(Object(f.a)({},e),{},{posts:[].concat(Object(N.a)(e.posts||[]),Object(N.a)(t.posts)),hasMorePosts:Boolean(t.posts.length)});case re:return Object(f.a)(Object(f.a)({},e),{},{posts:[t.post].concat(Object(N.a)(e.posts))});case"POST_ACTION:SET_EXPANDED_POST":return Object(f.a)(Object(f.a)({},e),{},{expandedPost:t.post});case"POST_ACTION_EDIT_EDIT":return Object(f.a)(Object(f.a)({},e),{},{expandedEdit:t.editpost});case"SHOW_INFO_POST_PANEL":return Object(f.a)(Object(f.a)({},e),{},{expandedPostInfo:t.infolist});case"SHOW_INFO_COMMENT_PANEL":return Object(f.a)(Object(f.a)({},e),{},{expandedCommentInfo:t.infolist});default:return e}},profile:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Vt:return Object(f.a)(Object(f.a)({},t),{},{user:n.user,isAuthorized:Boolean(null===(e=n.user)||void 0===e?void 0:e.id),isLoading:!1});default:return t}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL_MESSAGE":return Object(f.a)(Object(f.a)({},e),{},{modalWnd:t.showing});default:return e}},arhiv:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ARHIV_POSTS":return Object(f.a)(Object(f.a)({},e),{},{posts:t.posts,hasMorePosts:Boolean(t.posts.length)});case"LOAD_ARHIV_MORE":return Object(f.a)(Object(f.a)({},e),{},{posts:[].concat(Object(N.a)(e.posts||[]),Object(N.a)(t.posts)),hasMorePosts:Boolean(t.posts.length)});default:return e}}},la=Object(l.c)(Object(f.a)({router:Object(u.b)(ca)},ia)),ma=Object(l.e)(la,{},ua),pa=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{store:ma},r.a.createElement(u.a,{history:ca},r.a.createElement(ta,null)),r.a.createElement(Fe,null)))},da=(n(624),n(625),n(626),document.getElementById("root"));Object(o.render)(r.a.createElement(pa,null),da)},87:function(e,t,n){e.exports={profInput:"styles_profInput__1I0G_",profPass:"styles_profPass__2sN-1",profButton:"styles_profButton__33PKM"}}},[[329,1,2]]]);
//# sourceMappingURL=main.c0a4a75e.chunk.js.map